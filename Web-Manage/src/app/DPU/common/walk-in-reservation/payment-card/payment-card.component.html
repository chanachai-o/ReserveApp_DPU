<div class="modern-payment-card">
  <div class="modern-payment-card__header">
    <div class="modern-payment-card__status">
      <i class="ri-exchange-dollar-line"></i>
      <span>ชำระเงิน</span>
    </div>
    <span class="badge-payment">#{{ checkout.id }}</span>
  </div>

  <div class="modern-payment-card__main">
    <img *ngIf="checkout.payments[0]?.slip_url"
      [src]="checkout.payments[0].getSlipUrl()"
      alt="bill slip"
      class="slip-img" />

    <div class="modern-payment-card__detail">
      <div class="card-label">
        {{ checkout.table ? 'โต๊ะ #' + checkout.table.table_number : 'ห้อง: ' + (checkout.room?.name || '-') }}
      </div>
      <div class="meta">เวลา {{ checkout.start_time | date: 'HH:mm' }}</div>
      <div class="meta">{{ checkout.num_people || '-' }} คน ({{ checkout.user.name || checkout.user.phone || checkout.user_id || '-' }})</div>
    </div>

    <div class="modern-payment-card__summary">
      <div class="amount">{{ getTotalAmount(checkout.orders) | number:'1.2-2' }} ฿</div>
      <span class="badge-status"
        [ngClass]="checkout.status === 'completed' ? 'badge-success' : 'badge-wait'">
        <i class="ri-exchange-dollar-line"></i>
        {{ checkout.status === 'completed' ? 'ชำระแล้ว' : 'รอชำระ' }}
      </span>
    </div>
  </div>

  <div class="modern-payment-card__action">
    <button class="btn-modern btn-primary" (click)="onViewBill()" title="ดูบิล" data-hs-overlay="#view-bill">
      <i class="ri-file-list-3-line"></i> ดูบิล
    </button>
    <button class="btn-modern btn-success" (click)="onVerify()" *ngIf="checkout.status !== 'completed'">
      <i class="ri-check-double-line"></i> ยืนยันรับเงิน
    </button>
  </div>

  <div class="modern-payment-card__food">
    <div class="food-title">
      <i class="ri-restaurant-line"></i> รายการอาหาร
    </div>
    <div class="food-list">
      <ng-container *ngFor="let order of checkout.orders">
        <ng-container *ngFor="let item of order.order_items">
          <span class="food-badge">
            {{ item.menu.name }}
            <span *ngIf="item.quantity > 1" class="qty">x{{ item.quantity }}</span>
          </span>
        </ng-container>
      </ng-container>
    </div>
    <div *ngIf="!checkout.orders?.length" class="no-food">ยังไม่มีข้อมูลอาหาร</div>
  </div>

  <div class="modern-payment-card__footer"></div>
</div>
