<div
  class="box shadow-md rounded-2xl border border-rose-200 dark:border-rose-800 bg-white dark:bg-neutral-900 flex flex-col transition hover:scale-105">
  <div
    class="p-4 bg-gradient-to-r from-rose-100/60 to-white/80 dark:from-rose-900/15 rounded-t-2xl flex items-center justify-between">
    <div class="flex items-center gap-2 text-rose-500">
      <i class="ri-calendar-check-line text-2xl"></i>
      <span class="font-bold text-base">จองแล้ว</span>
    </div>
    <span class="badge bg-rose-100 text-rose-600 px-2 rounded">เลขที่ #{{ reservation.id}}</span>
  </div>
  <div class="flex flex-col items-center py-5 px-4 gap-2 flex-1">
    <img *ngIf="reservation.table?.picture" [src]="reservation.table?.getPicture()" alt="cover"
      class="rounded-xl border object-cover w-full h-full max-h-40 transition duration-200 hover:scale-105" />
    <div class="mt-3 font-semibold text-gray-700 dark:text-white">{{ reservation.table ? 'โต๊ะ #' +
      reservation.table.table_number : 'ห้อง: ' + (reservation.room?.name || '-') }}</div>
    <div class="text-xs text-gray-400">เวลา {{ reservation.start_time | date: 'HH:mm' }}</div>
    <div class="text-xs text-gray-400">{{ reservation.num_people || '-' }} คน ({{ reservation.user.name ||
      reservation.user.phone || reservation.user_id || '-' }})</div>
  </div>
  <div class="flex justify-between px-4 pb-4">
    <button (click)="onCheckIn()" class="ti-btn ti-btn-success ti-btn-xs rounded shadow" title="Check-in">
      <i class="ri-login-circle-line mr-1"></i> Check-in
    </button>
    <button (click)="onCancel()" class="ti-btn ti-btn-danger ti-btn-xs rounded shadow" title="ยกเลิก">
      <i class="ri-close-line mr-1"></i> ยกเลิก
    </button>
  </div>
  <div class="border-t border-dashed bg-gray-50 dark:bg-neutral-800 rounded-b-2xl px-4 py-2 text-xs text-gray-500">
    <div *ngIf="reservation.note" class="italic bg-gray-100 dark:bg-neutral-800 px-2 py-1 rounded">หมายเหตุ: {{
      reservation.note }}</div>
    <div *ngIf="reservation.orders.length > 0" class="mb-2">
      <div class="font-semibold text-xs text-gray-700 dark:text-gray-200 mb-1">รายการอาหารที่จอง:</div>
      <ul class="list-disc ml-5">
        <li *ngFor="let order of reservation.orders">
          <span *ngFor="let oi of order.order_items">
            {{ oi.menu.name }} <span *ngIf="oi.quantity > 1">x{{oi.quantity}}</span>
          </span>
        </li>
      </ul>
    </div>
    <div *ngIf="reservation.payments.length > 0">
      <span class="text-xs text-green-500"><i class="ri-money-dollar-circle-line"></i> มีการชำระเงินแล้ว</span>
    </div>
  </div>
</div>
