<form [formGroup]="form" (ngSubmit)="submit()"
  class="space-y-7 bg-white dark:bg-neutral-900 max-w-lg mx-auto border border-gray-100 dark:border-neutral-800">

  <div>
    <label class="block font-semibold text-gray-700 dark:text-gray-200 mb-1">
      เริ่มใช้{{ type==='room' ? 'ห้อง' : 'โต๊ะ' }}
    </label>
    <input type="datetime-local"
           formControlName="start_time"
           [min]="minDateTime"
           class="w-full px-3 py-2 rounded-lg bg-gray-50 dark:bg-neutral-800 border focus:border-primary focus:ring-1 focus:ring-primary transition disabled:opacity-60"
           [ngClass]="{'border-red-500': form.get('start_time')?.invalid && form.get('start_time')?.touched}"
           required>
    <div *ngIf="form.get('start_time')?.invalid && form.get('start_time')?.touched"
         class="text-xs text-red-500 mt-1">
      กรุณากรอกเวลาเริ่มใช้
    </div>
  </div>

  <div>
    <label class="block font-semibold text-gray-700 dark:text-gray-200 mb-1">
      จำนวนคน
    </label>
    <input type="number"
           min="1"
           formControlName="num_people"
           class="w-full px-3 py-2 rounded-lg bg-gray-50 dark:bg-neutral-800 border focus:border-primary focus:ring-1 focus:ring-primary transition"
           [ngClass]="{'border-red-500': form.get('num_people')?.invalid && form.get('num_people')?.touched}"
           required
           placeholder="ระบุจำนวนคนที่มาใช้บริการ">
    <div *ngIf="form.get('num_people')?.invalid && form.get('num_people')?.touched"
         class="text-xs text-red-500 mt-1">
      กรุณาระบุจำนวนคน
    </div>
  </div>

  <div>
    <label class="block font-semibold text-gray-700 dark:text-gray-200 mb-1">
      เบอร์โทรลูกค้า <span class="text-gray-400 font-normal">(ถ้ามี)</span>
    </label>
    <input type="text"
           formControlName="phone"
           class="w-full px-3 py-2 rounded-lg bg-gray-50 dark:bg-neutral-800 border focus:border-primary focus:ring-1 focus:ring-primary transition"
           placeholder="เช่น 089-xxx-xxxx"
           autocomplete="tel">
  </div>

  <!-- ฟิลด์ซ่อน -->
  <input type="hidden" formControlName="user_id">
  <input type="hidden" formControlName="table_id">
  <input type="hidden" formControlName="room_id">
  <input type="hidden" formControlName="status">

  <div class="flex flex-row-reverse gap-2 mt-6">
    <button *ngIf="status !== 'checked_in'"
            class="ti-btn ti-btn-primary !rounded-lg px-6 py-2 shadow hover:scale-105 transition-all"
            type="submit"
            [disabled]="!form.valid"
            data-hs-overlay="#add-reserve">
      <i class="ri-calendar-check-line mr-1"></i> ยืนยันจอง{{ form.value.room_id ? 'ห้อง' : 'โต๊ะ' }}
    </button>
    <button *ngIf="status === 'checked_in'"
            class="ti-btn ti-btn-success !rounded-lg px-6 py-2 shadow hover:scale-105 transition-all"
            type="submit"
            [disabled]="!form.valid"
            data-hs-overlay="#add-check-in">
      <i class="ri-login-circle-line mr-1"></i> ยืนยันลูกค้าเข้า{{ form.value.room_id ? 'ห้อง' : 'โต๊ะ' }}
    </button>
    <button class="ti-btn ti-btn-light !rounded-lg px-5 py-2 font-semibold border border-gray-300 dark:border-neutral-700"
            type="button"
            (click)="form.reset()">
      <i class="ri-refresh-line mr-1"></i> ล้างฟอร์ม
    </button>
  </div>
</form>
